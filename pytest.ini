[pytest]
pythonpath = . src
minversion = 7.0
addopts = -q -ra --strict-markers --strict-config --maxfail=1 --durations=10
testpaths =
    tests
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
    # Suppress async SQLAlchemy/asyncpg teardown noise in tests
    ignore:The garbage collector is trying to clean up non-checked-in connection:sqlalchemy.exc.SAWarning
    ignore:coroutine 'Connection\._cancel' was never awaited:RuntimeWarning
    ignore:coroutine '.*_cancel' was never awaited:RuntimeWarning
markers =
    auth: tests for authentication flows
    integration: integration tests requiring DB
    unit: unit tests
    e2e: end-to-end flows
asyncio_mode = auto

[anyio]
backend = asyncio
